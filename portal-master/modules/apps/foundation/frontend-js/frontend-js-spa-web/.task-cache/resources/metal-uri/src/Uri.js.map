{"version":3,"sources":["/source/Uri.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nimport { core, string } from 'metal';\nimport parse from './parse';\nimport MultiMap from 'metal-multimap';\n\nvar parseFn_ = parse;\n\nclass Uri {\n\n\t/**\n\t * This class contains setters and getters for the parts of the URI.\n\t * The following figure displays an example URIs and their component parts.\n\t *\n\t *                                  path\n\t *\t                             ┌───┴────┐\n\t *\t  abc://example.com:123/path/data?key=value#fragid1\n\t *\t  └┬┘   └────┬────┘ └┬┘           └───┬───┘ └──┬──┘\n\t * protocol  hostname  port            search    hash\n\t *          └──────┬───────┘\n\t *                host\n\t *\n\t * @param {*=} opt_uri Optional string URI to parse\n\t * @constructor\n\t */\n\tconstructor(opt_uri = '') {\n\t\tthis.url = Uri.parse(this.maybeAddProtocolAndHostname_(opt_uri));\n\t}\n\n\t/**\n\t * Adds parameters to uri from a <code>MultiMap</code> as source.\n\t * @param {MultiMap} multimap The <code>MultiMap</code> containing the\n\t *   parameters.\n\t * @protected\n\t * @chainable\n\t */\n\taddParametersFromMultiMap(multimap) {\n\t\tmultimap.names().forEach((name) => {\n\t\t\tmultimap.getAll(name).forEach((value) => {\n\t\t\t\tthis.addParameterValue(name, value);\n\t\t\t});\n\t\t});\n\t\treturn this;\n\t}\n\n\t/**\n\t * Adds the value of the named query parameters.\n\t * @param {string} key The parameter to set.\n\t * @param {*} value The new value. Will be explicitly casted to String.\n\t * @chainable\n\t */\n\taddParameterValue(name, value) {\n\t\tthis.ensureQueryInitialized_();\n\t\tif (core.isDef(value)) {\n\t\t\tvalue = String(value);\n\t\t}\n\t\tthis.query.add(name, value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Adds the values of the named query parameter.\n\t * @param {string} key The parameter to set.\n\t * @param {*} value The new value.\n\t * @chainable\n\t */\n\taddParameterValues(name, values) {\n\t\tvalues.forEach((value) => this.addParameterValue(name, value));\n\t\treturn this;\n\t}\n\n\t/**\n\t * Ensures query internal map is initialized and synced with initial value\n\t * extracted from URI search part.\n\t * @protected\n\t */\n\tensureQueryInitialized_() {\n\t\tif (this.query) {\n\t\t\treturn;\n\t\t}\n\t\tthis.query = new MultiMap();\n\t\tvar search = this.url.search;\n\t\tif (search) {\n\t\t\tsearch.substring(1).split('&').forEach((param) => {\n\t\t\t\tvar [key, value] = param.split('=');\n\t\t\t\tif (core.isDef(value)) {\n\t\t\t\t\tvalue = Uri.urlDecode(value);\n\t\t\t\t}\n\t\t\t\tthis.addParameterValue(key, value);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Gets the hash part of uri.\n\t * @return {string}\n\t */\n\tgetHash() {\n\t\treturn this.url.hash || '';\n\t}\n\n\t/**\n\t * Gets the host part of uri. E.g. <code>[hostname]:[port]</code>.\n\t * @return {string}\n\t */\n\tgetHost() {\n\t\tvar host = this.getHostname();\n\t\tif (host) {\n\t\t\tvar port = this.getPort();\n\t\t\tif (port && port !== '80') {\n\t\t\t\thost += ':' + port;\n\t\t\t}\n\t\t}\n\t\treturn host;\n\t}\n\n\t/**\n\t * Gets the hostname part of uri without protocol and port.\n\t * @return {string}\n\t */\n\tgetHostname() {\n\t\tvar hostname = this.url.hostname;\n\t\tif (hostname === Uri.HOSTNAME_PLACEHOLDER) {\n\t\t\treturn '';\n\t\t}\n\t\treturn hostname;\n\t}\n\n\t/**\n\t * Gets the origin part of uri. E.g. <code>http://[hostname]:[port]</code>.\n\t * @return {string}\n\t */\n\tgetOrigin() {\n\t\tvar host = this.getHost();\n\t\tif (host) {\n\t\t\treturn this.getProtocol() + '//' + host;\n\t\t}\n\t\treturn '';\n\t}\n\n\t/**\n\t * Returns the first value for a given parameter or undefined if the given\n\t * parameter name does not appear in the query string.\n\t * @param {string} paramName Unescaped parameter name.\n\t * @return {string|undefined} The first value for a given parameter or\n\t *   undefined if the given parameter name does not appear in the query\n\t *   string.\n\t */\n\tgetParameterValue(name) {\n\t\tthis.ensureQueryInitialized_();\n\t\treturn this.query.get(name);\n\t}\n\n\t/**\n\t * Returns the value<b>s</b> for a given parameter as a list of decoded\n\t * query parameter values.\n\t * @param {string} name The parameter to get values for.\n\t * @return {!Array<?>} The values for a given parameter as a list of decoded\n\t *   query parameter values.\n\t */\n\tgetParameterValues(name) {\n\t\tthis.ensureQueryInitialized_();\n\t\treturn this.query.getAll(name);\n\t}\n\n\t/**\n\t * Returns the name<b>s</b> of the parameters.\n\t * @return {!Array<string>} The names for the parameters as a list of\n\t *   strings.\n\t */\n\tgetParameterNames() {\n\t\tthis.ensureQueryInitialized_();\n\t\treturn this.query.names();\n\t}\n\n\t/**\n\t * Gets the function currently being used to parse URIs.\n\t * @return {!function()}\n\t */\n\tstatic getParseFn() {\n\t\treturn parseFn_;\n\t}\n\n\t/**\n\t * Gets the pathname part of uri.\n\t * @return {string}\n\t */\n\tgetPathname() {\n\t\treturn this.url.pathname;\n\t}\n\n\t/**\n\t * Gets the port number part of uri as string.\n\t * @return {string}\n\t */\n\tgetPort() {\n\t\treturn this.url.port;\n\t}\n\n\t/**\n\t * Gets the protocol part of uri. E.g. <code>http:</code>.\n\t * @return {string}\n\t */\n\tgetProtocol() {\n\t\treturn this.url.protocol;\n\t}\n\n\t/**\n\t * Gets the search part of uri. Search value is retrieved from query\n\t * parameters.\n\t * @return {string}\n\t */\n\tgetSearch() {\n\t\tvar search = '';\n\t\tvar querystring = '';\n\t\tthis.getParameterNames().forEach((name) => {\n\t\t\tthis.getParameterValues(name).forEach((value) => {\n\t\t\t\tquerystring += name;\n\t\t\t\tif (core.isDef(value)) {\n\t\t\t\t\tquerystring += '=' + encodeURIComponent(value);\n\t\t\t\t}\n\t\t\t\tquerystring += '&';\n\t\t\t});\n\t\t});\n\t\tquerystring = querystring.slice(0, -1);\n\t\tif (querystring) {\n\t\t\tsearch += '?' + querystring;\n\t\t}\n\t\treturn search;\n\t}\n\n\t/**\n\t * Checks if uri contains the parameter.\n\t * @param {string} name\n\t * @return {boolean}\n\t */\n\thasParameter(name) {\n\t\tthis.ensureQueryInitialized_();\n\t\treturn this.query.contains(name);\n\t}\n\n\t/**\n\t * Makes this URL unique by adding a random param to it. Useful for avoiding\n\t * cache.\n\t */\n\tmakeUnique() {\n\t\tthis.setParameterValue(Uri.RANDOM_PARAM, string.getRandomString());\n\t\treturn this;\n\t}\n\n\t/**\n\t * Maybe adds protocol and a hostname placeholder on a parial URI if needed.\n\t * Relevent for compatibility with <code>URL</code> native object.\n\t * @param {string=} opt_uri\n\t * @return {string} URI with protocol and hostname placeholder.\n\t */\n\tmaybeAddProtocolAndHostname_(opt_uri) {\n\t\tvar url = opt_uri;\n\t\tif (opt_uri.indexOf('://') === -1 &&\n\t\t\topt_uri.indexOf('javascript:') !== 0) { // jshint ignore:line\n\n\t\t\turl = Uri.DEFAULT_PROTOCOL;\n\t\t\tif (opt_uri[0] !== '/' || opt_uri[1] !== '/') {\n\t\t\t\turl += '//';\n\t\t\t}\n\n\t\t\tswitch (opt_uri.charAt(0)) {\n\t\t\t\tcase '.':\n\t\t\t\tcase '?':\n\t\t\t\tcase '#':\n\t\t\t\t\turl += Uri.HOSTNAME_PLACEHOLDER;\n\t\t\t\t\turl += '/';\n\t\t\t\t\turl += opt_uri;\n\t\t\t\t\tbreak;\n\t\t\t\tcase '':\n\t\t\t\tcase '/':\n\t\t\t\t\tif (opt_uri[1] !== '/') {\n\t\t\t\t\t\turl += Uri.HOSTNAME_PLACEHOLDER;\n\t\t\t\t\t}\n\t\t\t\t\turl += opt_uri;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\turl += opt_uri;\n\t\t\t}\n\t\t}\n\t\treturn url;\n\t}\n\n\t/**\n\t * Normalizes the parsed object to be in the expected standard.\n\t * @param {!Object}\n\t */\n\tstatic normalizeObject(parsed) {\n\t\tvar length = parsed.pathname ? parsed.pathname.length : 0;\n\t\tif (length > 1 && parsed.pathname[length - 1] === '/') {\n\t\t\tparsed.pathname = parsed.pathname.substr(0, length - 1);\n\t\t}\n\t\treturn parsed;\n\t}\n\n\t/**\n\t * Parses the given uri string into an object.\n\t * @param {*=} opt_uri Optional string URI to parse\n\t */\n\tstatic parse(opt_uri) {\n\t\treturn Uri.normalizeObject(parseFn_(opt_uri));\n\t}\n\n\t/**\n\t * Removes the named query parameter.\n\t * @param {string} name The parameter to remove.\n\t * @chainable\n\t */\n\tremoveParameter(name) {\n\t\tthis.ensureQueryInitialized_();\n\t\tthis.query.remove(name);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes uniqueness parameter of the uri.\n\t * @chainable\n\t */\n\tremoveUnique() {\n\t\tthis.removeParameter(Uri.RANDOM_PARAM);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the hash.\n\t * @param {string} hash\n\t * @chainable\n\t */\n\tsetHash(hash) {\n\t\tthis.url.hash = hash;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the hostname.\n\t * @param {string} hostname\n\t * @chainable\n\t */\n\tsetHostname(hostname) {\n\t\tthis.url.hostname = hostname;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the value of the named query parameters, clearing previous values\n\t * for that key.\n\t * @param {string} key The parameter to set.\n\t * @param {*} value The new value.\n\t * @chainable\n\t */\n\tsetParameterValue(name, value) {\n\t\tthis.removeParameter(name);\n\t\tthis.addParameterValue(name, value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the values of the named query parameters, clearing previous values\n\t * for that key.\n\t * @param {string} key The parameter to set.\n\t * @param {*} value The new value.\n\t * @chainable\n\t */\n\tsetParameterValues(name, values) {\n\t\tthis.removeParameter(name);\n\t\tvalues.forEach((value) => this.addParameterValue(name, value));\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the pathname.\n\t * @param {string} pathname\n\t * @chainable\n\t */\n\tsetPathname(pathname) {\n\t\tthis.url.pathname = pathname;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the port number.\n\t * @param {*} port Port number.\n\t * @chainable\n\t */\n\tsetPort(port) {\n\t\tthis.url.port = port;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the function that will be used for parsing the original string uri\n\t * into an object.\n\t * @param {!function()} parseFn\n\t */\n\tstatic setParseFn(parseFn) {\n\t\tparseFn_ = parseFn;\n\t}\n\n\t/**\n\t * Sets the protocol. If missing <code>http:</code> is used as default.\n\t * @param {string} protocol\n\t * @chainable\n\t */\n\tsetProtocol(protocol) {\n\t\tthis.url.protocol = protocol;\n\t\tif (this.url.protocol[this.url.protocol.length - 1] !== ':') {\n\t\t\tthis.url.protocol += ':';\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * @return {string} The string form of the url.\n\t * @override\n\t */\n\ttoString() {\n\t\tvar href = '';\n\t\tvar host = this.getHost();\n\t\tif (host) {\n\t\t\thref += this.getProtocol() + '//';\n\t\t}\n\t\thref += host + this.getPathname() + this.getSearch() + this.getHash();\n\t\treturn href;\n\t}\n\n\t/**\n\t * Joins the given paths.\n\t * @param {string} basePath\n\t * @param {...string} ...paths Any number of paths to be joined with the base url.\n\t * @static\n\t */\n\tstatic joinPaths(basePath, ...paths) {\n\t\tif (basePath.charAt(basePath.length - 1) === '/') {\n\t\t\tbasePath = basePath.substring(0, basePath.length - 1);\n\t\t}\n\t\tpaths = paths.map(path => path.charAt(0) === '/' ? path.substring(1) : path);\n\t\treturn [basePath].concat(paths).join('/').replace(/\\/$/, '');\n\t}\n\n\t/**\n\t * URL-decodes the string. We need to specially handle '+'s because\n\t * the javascript library doesn't convert them to spaces.\n\t * @param {string} str The string to url decode.\n\t * @return {string} The decoded {@code str}.\n\t */\n\tstatic urlDecode(str) {\n\t\treturn decodeURIComponent(str.replace(/\\+/g, ' '));\n\t}\n\n}\n\n/**\n * Default protocol value.\n * @type {string}\n * @default http:\n * @static\n */\nUri.DEFAULT_PROTOCOL = 'http:';\n\n/**\n * Hostname placeholder. Relevant to internal usage only.\n * @type {string}\n * @static\n */\nUri.HOSTNAME_PLACEHOLDER = 'hostname' + Date.now();\n\n/**\n * Name used by the param generated by `makeUnique`.\n * @type {string}\n * @static\n */\nUri.RANDOM_PARAM = 'zx';\n\nexport default Uri;\n"]}