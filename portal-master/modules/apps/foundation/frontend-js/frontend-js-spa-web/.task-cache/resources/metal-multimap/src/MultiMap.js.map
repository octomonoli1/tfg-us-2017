{"version":3,"sources":["/source/MultiMap.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,KAAI,SAAS,OAAO,MAApB;;;;;;;;KAOM,Q;;;AACL,sBAAc;AAAA;;AAAA,gDACb,sBADa;;AAEb,SAAK,IAAL,GAAY,OAAO,IAAP,CAAZ;AACA,SAAK,MAAL,GAAc,OAAO,IAAP,CAAd;AAHa;AAIb;;;;;;;;;;qBAQD,G,gBAAI,I,EAAM,K,EAAO;AAChB,QAAK,IAAL,CAAU,KAAK,WAAL,EAAV,IAAgC,IAAhC;AACA,QAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,IAAkC,KAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,KAAmC,EAArE;AACA,QAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,EAAgC,IAAhC,CAAqC,KAArC;AACA,UAAO,IAAP;AACA,G;;qBAMD,K,oBAAQ;AACP,QAAK,IAAL,GAAY,OAAO,IAAP,CAAZ;AACA,QAAK,MAAL,GAAc,OAAO,IAAP,CAAd;AACA,UAAO,IAAP;AACA,G;;qBAQD,Q,qBAAS,I,EAAM;AACd,UAAO,KAAK,WAAL,MAAsB,KAAK,MAAlC;AACA,G;;qBAKD,e,8BAAkB;AACjB,QAAK,MAAL,GAAc,IAAd;AACA,G;;qBAQD,G,gBAAI,I,EAAM;AACT,OAAI,SAAS,KAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,CAAb;AACA,OAAI,MAAJ,EAAY;AACX,WAAO,OAAO,CAAP,CAAP;AACA;AACD,G;;qBAOD,M,mBAAO,I,EAAM;AACZ,UAAO,KAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,CAAP;AACA,G;;qBAMD,O,sBAAU;AACT,UAAO,KAAK,IAAL,OAAgB,CAAvB;AACA,G;;qBAMD,K,oBAAQ;AAAA;;AACP,UAAO,OAAO,IAAP,CAAY,KAAK,MAAjB,EAAyB,GAAzB,CAA6B,UAAC,GAAD;AAAA,WAAS,OAAK,IAAL,CAAU,GAAV,CAAT;AAAA,IAA7B,CAAP;AACA,G;;qBAOD,M,mBAAO,I,EAAM;AACZ,UAAO,KAAK,IAAL,CAAU,KAAK,WAAL,EAAV,CAAP;AACA,UAAO,KAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,CAAP;AACA,UAAO,IAAP;AACA,G;;qBASD,G,gBAAI,I,EAAM,K,EAAO;AAChB,QAAK,IAAL,CAAU,KAAK,WAAL,EAAV,IAAgC,IAAhC;AACA,QAAK,MAAL,CAAY,KAAK,WAAL,EAAZ,IAAkC,CAAC,KAAD,CAAlC;AACA,UAAO,IAAP;AACA,G;;qBAMD,I,mBAAO;AACN,UAAO,KAAK,KAAL,GAAa,MAApB;AACA,G;;qBAMD,Q,uBAAW;AACV,UAAO,KAAK,SAAL,CAAe,KAAK,MAApB,CAAP;AACA,G;;;;;mBAGa,Q","sourcesContent":["'use strict';\n\nimport { Disposable } from 'metal';\n\n/**\n * A cached reference to the create function.\n */\nvar create = Object.create;\n\n/**\n * Case insensitive string Multimap implementation. Allows multiple values for\n * the same key name.\n * @extends {Disposable}\n */\nclass MultiMap extends Disposable {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.keys = create(null);\n\t\tthis.values = create(null);\n\t}\n\n\t/**\n\t * Adds value to a key name.\n\t * @param {string} name\n\t * @param {*} value\n\t * @chainable\n\t */\n\tadd(name, value) {\n\t\tthis.keys[name.toLowerCase()] = name;\n\t\tthis.values[name.toLowerCase()] = this.values[name.toLowerCase()] || [];\n\t\tthis.values[name.toLowerCase()].push(value);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Clears map names and values.\n\t * @chainable\n\t */\n\tclear() {\n\t\tthis.keys = create(null);\n\t\tthis.values = create(null);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Checks if map contains a value to the key name.\n\t * @param {string} name\n\t * @return {boolean}\n\t * @chainable\n\t */\n\tcontains(name) {\n\t\treturn name.toLowerCase() in this.values;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisposeInternal() {\n\t\tthis.values = null;\n\t}\n\n\t/**\n\t * Gets the first added value from a key name.\n\t * @param {string} name\n\t * @return {*}\n\t * @chainable\n\t */\n\tget(name) {\n\t\tvar values = this.values[name.toLowerCase()];\n\t\tif (values) {\n\t\t\treturn values[0];\n\t\t}\n\t}\n\n\t/**\n\t * Gets all values from a key name.\n\t * @param {string} name\n\t * @return {Array.<*>}\n\t */\n\tgetAll(name) {\n\t\treturn this.values[name.toLowerCase()];\n\t}\n\n\t/**\n\t * Returns true if the map is empty, false otherwise.\n\t * @return {boolean}\n\t */\n\tisEmpty() {\n\t\treturn this.size() === 0;\n\t}\n\n\t/**\n\t * Gets array of key names.\n\t * @return {Array.<string>}\n\t */\n\tnames() {\n\t\treturn Object.keys(this.values).map((key) => this.keys[key]);\n\t}\n\n\t/**\n\t * Removes all values from a key name.\n\t * @param {string} name\n\t * @chainable\n\t */\n\tremove(name) {\n\t\tdelete this.keys[name.toLowerCase()];\n\t\tdelete this.values[name.toLowerCase()];\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets the value of a key name. Relevant to replace the current values with\n\t * a new one.\n\t * @param {string} name\n\t * @param {*} value\n\t * @chainable\n\t */\n\tset(name, value) {\n\t\tthis.keys[name.toLowerCase()] = name;\n\t\tthis.values[name.toLowerCase()] = [value];\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets the size of the map key names.\n\t * @return {number}\n\t */\n\tsize() {\n\t\treturn this.names().length;\n\t}\n\n\t/**\n\t * Returns the parsed values as a string.\n\t * @return {string}\n\t */\n\ttoString() {\n\t\treturn JSON.stringify(this.values);\n\t}\n}\n\nexport default MultiMap;\n"]}