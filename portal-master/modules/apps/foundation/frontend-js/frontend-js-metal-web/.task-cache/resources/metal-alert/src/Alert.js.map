{"version":3,"sources":["/source/Alert.js"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nimport { core } from 'metal';\nimport dom from 'metal-dom';\nimport Anim from 'metal-anim';\nimport Component from 'metal-component';\nimport { EventHandler } from 'metal-events';\nimport Soy from 'metal-soy';\n\nimport templates from './Alert.soy';\n\n/**\n * Alert component.\n */\nclass Alert extends Component {\n\tcreated() {\n\t\tthis.eventHandler_ = new EventHandler();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdetached() {\n\t\tsuper.detached();\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tclearTimeout(this.delay_);\n\t}\n\n\t/**\n\t * Closes the alert, disposing it once the animation ends.\n\t */\n\tclose() {\n\t\tdom.once(this.element, 'animationend', this.dispose.bind(this));\n\t\tdom.once(this.element, 'transitionend', this.dispose.bind(this));\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tthis.syncVisible(false);\n\t}\n\n\t/**\n\t * Handles document click in order to close the alert.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleDocClick_(event) {\n\t\tif (!this.element.contains(event.target)) {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Hide the alert.\n\t */\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * Hides the alert completely (with display \"none\"). This is called after the\n\t * hiding animation is done.\n\t * @protected\n\t */\n\thideCompletely_() {\n\t\tif (!this.isDisposed() && !this.visible) {\n\t\t\tsuper.syncVisible(false);\n\t\t}\n \t}\n\n\t/**\n\t * Toggles the visibility of the alert.\n\t */\n\ttoggle() {\n\t\tthis.visible = !this.visible;\n\t}\n\n\t/**\n\t * Show the alert.\n\t */\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\t/**\n\t * Synchronization logic for `dismissible` state.\n\t * @param {boolean} dismissible\n\t */\n\tsyncDismissible(dismissible) {\n\t\tif (dismissible) {\n\t\t\tthis.eventHandler_.add(dom.on(document, 'click', this.handleDocClick_.bind(this)));\n\t\t} else {\n\t\t\tthis.eventHandler_.removeAllListeners();\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `hideDelay` state.\n\t * @param {?number} hideDelay\n\t */\n\tsyncHideDelay(hideDelay) {\n\t\tif (core.isNumber(hideDelay) && this.visible) {\n\t\t\tclearTimeout(this.delay_);\n\t\t\tthis.delay_ = setTimeout(this.hide.bind(this), hideDelay);\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `visible` state.\n\t * @param {boolean} visible\n\t */\n\tsyncVisible(visible, prevVisible) {\n\t\tvar shouldAsync = false;\n\t\tif (!visible) {\n\t\t\tdom.once(this.element, 'animationend', this.hideCompletely_.bind(this));\n\t\t\tdom.once(this.element, 'transitionend', this.hideCompletely_.bind(this));\n\t\t} else if (core.isDef(prevVisible)) {\n\t\t\tshouldAsync = true;\n\t\t\tsuper.syncVisible(true);\n\t\t}\n\n\t\tvar showOrHide = () => {\n\t\t\tif (this.isDisposed()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdom.removeClasses(this.element, this.animClasses[visible ? 'hide' : 'show']);\n\t\t\tdom.addClasses(this.element, this.animClasses[visible ? 'show' : 'hide']);\n\n\t\t\t// Some browsers do not fire transitionend events when running in background\n\t\t\t// tab, see https://bugzilla.mozilla.org/show_bug.cgi?id=683696.\n\t\t\tAnim.emulateEnd(this.element);\n\n\t\t\tif (visible && core.isNumber(this.hideDelay)) {\n\t\t\t\tthis.syncHideDelay(this.hideDelay);\n\t\t\t}\n\t\t};\n\n\t\tif (shouldAsync) {\n\t\t\t// We need to start the animation asynchronously because of the possible\n\t\t\t// previous call to `super.syncVisible`, which doesn't allow the show\n\t\t\t// animation to work as expected.\n\t\t\tsetTimeout(showOrHide, 0);\n\t\t} else {\n\t\t\tshowOrHide();\n\t\t}\n\t}\n}\nSoy.register(Alert, templates);\n\n/**\n * Alert state definition.\n * @type {!Object}\n * @static\n */\nAlert.STATE = {\n\t/**\n\t * The CSS classes that should be added to the alert when being shown/hidden.\n\t * @type {!Object}\n\t */\n\tanimClasses: {\n\t\tvalidator: core.isObject,\n\t\tvalue: {\n\t\t\tshow: 'fade in',\n\t\t\thide: 'fade'\n\t\t}\n\t},\n\n\t/**\n\t * The body content of the alert.\n\t * @type {string}\n\t */\n\tbody: {\n\t\tisHtml: true\n\t},\n\n\t/**\n\t * Flag indicating if the alert should be dismissable (closeable).\n\t * @type {boolean}\n\t * @default true\n\t */\n\tdismissible: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: true\n\t},\n\n\t/**\n\t * The CSS classes that should be added to the alert.\n\t * @type {string}\n\t * @default 'alert-success'\n\t */\n\telementClasses: {\n\t\tvalue: 'alert-success'\n\t},\n\n\t/**\n\t * Delay hiding the alert (ms).\n\t * @type {?number}\n\t */\n\thideDelay: {\n\t},\n\n\t/**\n\t * Spinner indicating.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tspinner: {\n\t\tvalue: false\n\t},\n\n\t/**\n\t * The CSS classes that should be added to the spinner.\n\t * @type {string}\n\t */\n\tspinnerClasses: {\n\t},\n\n\t/**\n\t * Spinner is marked as done.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tspinnerDone: {\n\t\tvalue: false\n\t},\n\n\t/**\n\t * Flag indicating if the alert is visible or not.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tvisible: {\n\t\tvalue: false\n\t}\n};\n\nexport default Alert;\nimport JQueryAdapter from 'metal-jquery-adapter/src/JQueryAdapter';JQueryAdapter.register('alert', Alert);"]}