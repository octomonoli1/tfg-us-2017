{"version":3,"sources":["IncrementalDomUnusedComponents.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;KAIM;;;;;iCAKE,6BAAS,OAAO;AACtB,QAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAM,MAAN,EAAc,GAAlC,EAAuC;AACtC,UAAM,CAAN,EAAS,WAAT,GAAuB,OAAvB,GAAiC,IAAjC,CADsC;AAEtC,WAAO,IAAP,CAAY,MAAM,CAAN,CAAZ,EAFsC;IAAvC;AAIA,OAAI,CAAC,UAAD,EAAa;AAChB,iBAAa,IAAb,CADgB;AAEhB,iBAAM,QAAN,CAAe,cAAf,EAFgB;IAAjB;;;SAVI;;;AAiBN,KAAI,SAAS,EAAT;AACJ,KAAI,aAAa,KAAb;;;;;;;AAOJ,UAAS,cAAT,GAA0B;AACzB,OAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,OAAO,MAAP,EAAe,GAAnC,EAAwC;AACvC,OAAI,CAAC,OAAO,CAAP,EAAU,UAAV,EAAD,EAAyB;AAC5B,QAAI,WAAW,OAAO,CAAP,EAAU,WAAV,EAAX,CADwB;AAE5B,QAAI,CAAC,SAAS,SAAT,EAAD,EAAuB;AAC1B,cAAS,QAAT,GAAoB,oBAApB,CAAyC,CAAC,OAAO,CAAP,EAAU,MAAV,CAAiB,GAAjB,CAA1C,EAD0B;KAA3B;IAFD;GADD;AAQA,eAAa,KAAb,CATyB;AAUzB,WAAS,EAAT,CAVyB;EAA1B;;mBAae","file":"../../../node_modules/metal-incremental-dom/src/cleanup/IncrementalDomUnusedComponents.js","sourcesContent":["'use strict';\n\nimport { async } from 'metal';\n\nclass IncrementalDomUnusedComponents {\n\t/**\n\t * Schedules a cleanup of unused components to happen in the next tick.\n\t * @param {!Array<!Component} comps\n\t */\n\tstatic schedule(comps) {\n\t\tfor (var i = 0; i < comps.length; i++) {\n\t\t\tcomps[i].getRenderer().parent_ = null;\n\t\t\tcomps_.push(comps[i]);\n\t\t}\n\t\tif (!scheduled_) {\n\t\t\tscheduled_ = true;\n\t\t\tasync.nextTick(disposeUnused_);\n\t\t}\n\t}\n}\n\nvar comps_ = [];\nvar scheduled_ = false;\n\n/**\n * Disposes all sub components that were not rerendered since the last\n * time this function was scheduled.\n * @protected\n */\nfunction disposeUnused_() {\n\tfor (var i = 0; i < comps_.length; i++) {\n\t\tif (!comps_[i].isDisposed()) {\n\t\t\tvar renderer = comps_[i].getRenderer();\n\t\t\tif (!renderer.getParent()) {\n\t\t\t\trenderer.getOwner().disposeSubComponents([comps_[i].config.key]);\n\t\t\t}\n\t\t}\n\t}\n\tscheduled_ = false;\n\tcomps_ = [];\n}\n\nexport default IncrementalDomUnusedComponents;\n"],"sourceRoot":"/source/"}