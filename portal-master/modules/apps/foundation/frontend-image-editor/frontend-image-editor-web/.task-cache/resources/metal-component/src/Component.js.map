{"version":3,"sources":["Component.js"],"names":[],"mappings":"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","file":"../../../node_modules/metal-component/src/Component.js","sourcesContent":["'use strict';\n\nimport { array, core, object } from 'metal';\nimport { dom, DomEventEmitterProxy } from 'metal-dom';\nimport ComponentRenderer from './ComponentRenderer';\nimport { EventHandler } from 'metal-events';\nimport State from 'metal-state';\n\n/**\n * Component collects common behaviors to be followed by UI components, such\n * as Lifecycle, CSS classes management, events encapsulation and support for\n * different types of rendering.\n * Rendering logic can be done by either:\n *     - Listening to the `render` event inside the `created` lifecycle function\n *       and adding the rendering logic to the listener.\n *     - Using an existing implementation of `ComponentRenderer` like `Soy`,\n *       and following its patterns.\n *     - Building your own implementation of a `ComponentRenderer`.\n * Specifying the renderer that will be used can be done by setting the RENDERER\n * static variable to the renderer's constructor function.\n *\n * Example:\n *\n * <code>\n * class CustomComponent extends Component {\n *   constructor(config) {\n *     super(config);\n *   }\n *\n *   created() {\n *   }\n *\n *   rendered() {\n *   }\n *\n *   attached() {\n *   }\n *\n *   detached() {\n *   }\n * }\n *\n * CustomComponent.RENDERER = MyRenderer;\n *\n * CustomComponent.STATE = {\n *   title: { value: 'Title' },\n *   fontSize: { value: '10px' }\n * };\n * </code>\n *\n * @extends {State}\n */\nclass Component extends State {\n\t/**\n\t * Constructor function for `Component`.\n\t * @param {Object=} opt_config An object with the initial values for this\n\t *     component's state.\n\t * @param {boolean|string|Element=} opt_parentElement The element where the\n\t *     component should be rendered. Can be given as a selector or an element.\n\t *     If `false` is passed, the component won't be rendered automatically\n\t *     after created.\n\t * @constructor\n\t */\n\tconstructor(opt_config, opt_parentElement) {\n\t\tsuper(opt_config);\n\n\t\t/**\n\t\t * All listeners that were attached until the `DomEventEmitterProxy` instance\n\t\t * was created.\n\t\t * @type {!Object<string, bool>}\n\t\t * @protected\n\t\t */\n\t\tthis.attachedListeners_ = {};\n\n\t\t/**\n\t\t * Gets all nested components.\n\t\t * @type {!Array<!Component>}\n\t\t */\n\t\tthis.components = {};\n\n\t\t/**\n\t\t * Instance of `DomEventEmitterProxy` which proxies events from the component's\n\t\t * element to the component itself.\n\t\t * @type {DomEventEmitterProxy}\n\t\t * @protected\n\t\t */\n\t\tthis.elementEventProxy_ = null;\n\n\t\t/**\n\t\t * The `EventHandler` instance for events attached from the `events` state key.\n\t\t * @type {!EventHandler}\n\t\t * @protected\n\t\t */\n\t\tthis.eventsStateKeyHandler_ = new EventHandler();\n\n\t\t/**\n\t\t * Whether the element is in document.\n\t\t * @type {boolean}\n\t\t */\n\t\tthis.inDocument = false;\n\n\t\t/**\n\t\t * The initial config option passed to this constructor.\n\t\t * @type {!Object}\n\t\t * @protected\n\t\t */\n\t\tthis.initialConfig_ = opt_config || {};\n\n\t\t/**\n\t\t * Whether the element was rendered.\n\t\t * @type {boolean}\n\t\t */\n\t\tthis.wasRendered = false;\n\n\t\t/**\n\t\t * The component's element will be appended to the element this variable is\n\t\t * set to, unless the user specifies another parent when calling `render` or\n\t\t * `attach`.\n\t\t * @type {!Element}\n\t\t */\n\t\tthis.DEFAULT_ELEMENT_PARENT = document.body;\n\n\t\tcore.mergeSuperClassesProperty(this.constructor, 'ELEMENT_CLASSES', this.mergeElementClasses_);\n\t\tcore.mergeSuperClassesProperty(this.constructor, 'SYNC_UPDATES', array.firstDefinedValue);\n\n\t\tthis.renderer_ = this.createRenderer();\n\t\tthis.renderer_.on('rendered', this.rendered.bind(this));\n\n\t\tthis.on('stateChanged', this.handleStateChanged_);\n\t\tthis.newListenerHandle_ = this.on('newListener', this.handleNewListener_);\n\t\tthis.on('eventsChanged', this.onEventsChanged_);\n\t\tthis.addListenersFromObj_(this.events);\n\n\t\tthis.created();\n\t\tif (opt_parentElement !== false) {\n\t\t\tthis.render_(opt_parentElement);\n\t\t}\n\t\tthis.on('elementChanged', this.onElementChanged_);\n\t}\n\n\t/**\n\t * Adds the necessary classes to the component's element.\n\t */\n\taddElementClasses() {\n\t\tvar classesToAdd = this.constructor.ELEMENT_CLASSES_MERGED;\n\t\tif (this.elementClasses) {\n\t\t\tclassesToAdd = classesToAdd + ' ' + this.elementClasses;\n\t\t}\n\t\tdom.addClasses(this.element, classesToAdd);\n\t}\n\n\t/**\n\t * Adds the listeners specified in the given object.\n\t * @param {Object} events\n\t * @protected\n\t */\n\taddListenersFromObj_(events) {\n\t\tvar eventNames = Object.keys(events || {});\n\t\tfor (var i = 0; i < eventNames.length; i++) {\n\t\t\tvar info = this.extractListenerInfo_(events[eventNames[i]]);\n\t\t\tif (info.fn) {\n\t\t\t\tvar handler;\n\t\t\t\tif (info.selector) {\n\t\t\t\t\thandler = this.delegate(eventNames[i], info.selector, info.fn);\n\t\t\t\t} else {\n\t\t\t\t\thandler = this.on(eventNames[i], info.fn);\n\t\t\t\t}\n\t\t\t\tthis.eventsStateKeyHandler_.add(handler);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Invokes the attached Lifecycle. When attached, the component element is\n\t * appended to the DOM and any other action to be performed must be\n\t * implemented in this method, such as, binding DOM events. A component can\n\t * be re-attached multiple times.\n\t * @param {(string|Element)=} opt_parentElement Optional parent element\n\t *     to render the component.\n\t * @param {(string|Element)=} opt_siblingElement Optional sibling element\n\t *     to render the component before it. Relevant when the component needs\n\t *     to be rendered before an existing element in the DOM.\n\t * @protected\n\t * @chainable\n\t */\n\tattach(opt_parentElement, opt_siblingElement) {\n\t\tif (!this.inDocument) {\n\t\t\tthis.renderElement_(opt_parentElement, opt_siblingElement);\n\t\t\tthis.inDocument = true;\n\t\t\tthis.emit('attached', {\n\t\t\t\tparent: opt_parentElement,\n\t\t\t\tsibling: opt_siblingElement\n\t\t\t});\n\t\t\tthis.attached();\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Lifecycle. When attached, the component element is appended to the DOM\n\t * and any other action to be performed must be implemented in this method,\n\t * such as, binding DOM events. A component can be re-attached multiple\n\t * times, therefore the undo behavior for any action performed in this phase\n\t * must be implemented on the detach phase.\n\t */\n\tattached() {}\n\n\t/**\n\t * Adds the given sub component, replacing any existing one with the same ref.\n\t * @param {string} ref\n\t * @param {!Component} component\n\t */\n\taddSubComponent(ref, component) {\n\t\tthis.components[ref] = component;\n\t}\n\n\t/**\n\t * Lifecycle. This is called when the component has just been created, before\n\t * it's rendered.\n\t */\n\tcreated() {}\n\n\t/**\n\t * Creates the renderer for this component. Sub classes can override this to\n\t * return a custom renderer as needed.\n\t * @return {!ComponentRenderer}\n\t */\n\tcreateRenderer() {\n\t\tcore.mergeSuperClassesProperty(this.constructor, 'RENDERER', array.firstDefinedValue);\n\t\treturn new this.constructor.RENDERER_MERGED(this);\n\t}\n\n\t/**\n\t * Listens to a delegate event on the component's element.\n\t * @param {string} eventName The name of the event to listen to.\n\t * @param {string} selector The selector that matches the child elements that\n\t *   the event should be triggered for.\n\t * @param {!function(!Object)} callback Function to be called when the event is\n\t *   triggered. It will receive the normalized event object.\n\t * @return {!EventHandle} Can be used to remove the listener.\n\t */\n\tdelegate(eventName, selector, callback) {\n\t\treturn this.on('delegate:' + eventName + ':' + selector, callback);\n\t}\n\n\t/**\n\t * Invokes the detached Lifecycle. When detached, the component element is\n\t * removed from the DOM and any other action to be performed must be\n\t * implemented in this method, such as, unbinding DOM events. A component\n\t * can be detached multiple times.\n\t * @chainable\n\t */\n\tdetach() {\n\t\tif (this.inDocument) {\n\t\t\tif (this.element && this.element.parentNode) {\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.inDocument = false;\n\t\t\tthis.detached();\n\t\t}\n\t\tthis.emit('detached');\n\t\treturn this;\n\t}\n\n\t/**\n\t * Lifecycle. When detached, the component element is removed from the DOM\n\t * and any other action to be performed must be implemented in this method,\n\t * such as, unbinding DOM events. A component can be detached multiple\n\t * times, therefore the undo behavior for any action performed in this phase\n\t * must be implemented on the attach phase.\n\t */\n\tdetached() {}\n\n\t/**\n\t * Lifecycle. Called when the component is disposed. Should be overridden by\n\t * sub classes to dispose of any internal data or events.\n\t */\n\tdisposed() {}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisposeInternal() {\n\t\tthis.disposed();\n\n\t\tthis.detach();\n\n\t\tif (this.elementEventProxy_) {\n\t\t\tthis.elementEventProxy_.dispose();\n\t\t\tthis.elementEventProxy_ = null;\n\t\t}\n\n\t\tthis.disposeSubComponents(Object.keys(this.components));\n\t\tthis.components = null;\n\n\t\tthis.renderer_.dispose();\n\t\tthis.renderer_ = null;\n\n\t\tsuper.disposeInternal();\n\t}\n\n\t/**\n\t * Calls `dispose` on all subcomponents.\n\t * @param {!Array<string>} keys\n\t */\n\tdisposeSubComponents(keys) {\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tvar component = this.components[keys[i]];\n\t\t\tif (component && !component.isDisposed()) {\n\t\t\t\tcomponent.element = null;\n\t\t\t\tcomponent.dispose();\n\t\t\t\tdelete this.components[keys[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Extracts listener info from the given value.\n\t * @param {function()|string|{selector:string,fn:function()|string}} value\n\t * @return {!{selector:string,fn:function()}}\n\t * @protected\n\t */\n\textractListenerInfo_(value) {\n\t\tvar info = {\n\t\t\tfn: value\n\t\t};\n\t\tif (core.isObject(value) && !core.isFunction(value)) {\n\t\t\tinfo.selector = value.selector;\n\t\t\tinfo.fn = value.fn;\n\t\t}\n\t\tif (core.isString(info.fn)) {\n\t\t\tinfo.fn = this.getListenerFn(info.fn);\n\t\t}\n\t\treturn info;\n\t}\n\n\t/**\n\t * Gets the configuration object that was passed to this component's constructor.\n\t * @return {!Object}\n\t */\n\tgetInitialConfig() {\n\t\treturn this.initialConfig_;\n\t}\n\n\t/**\n\t * Gets the listener function from its name. If the name is prefixed with a\n\t * component id, the function will be called on that specified component. Otherwise\n\t * it will be called on this component instead.\n\t * @param {string} fnName\n\t * @return {function()}\n\t */\n\tgetListenerFn(fnName) {\n\t\tif (core.isFunction(this[fnName])) {\n\t\t\treturn this[fnName].bind(this);\n\t\t} else {\n\t\t\tconsole.error('No function named \"' + fnName + '\" was found in the ' +\n\t\t\t\t'component \"' + core.getFunctionName(this.constructor) + '\". Make ' +\n\t\t\t\t'sure that you specify valid function names when adding inline listeners.'\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Calls the synchronization function for the state key.\n\t * @param {string} key\n\t * @param {Object.<string, Object>=} opt_change Object containing newVal and\n\t *     prevVal keys.\n\t * @protected\n\t */\n\tfireStateKeyChange_(key, opt_change) {\n\t\tvar fn = this['sync' + key.charAt(0).toUpperCase() + key.slice(1)];\n\t\tif (core.isFunction(fn)) {\n\t\t\tif (!opt_change) {\n\t\t\t\topt_change = {\n\t\t\t\t\tnewVal: this[key],\n\t\t\t\t\tprevVal: undefined\n\t\t\t\t};\n\t\t\t}\n\t\t\tfn.call(this, opt_change.newVal, opt_change.prevVal);\n\t\t}\n\t}\n\n\t/**\n\t * Gets the `ComponentRenderer` instance being used.\n\t * @return {!ComponentRenderer}\n\t */\n\tgetRenderer() {\n\t\treturn this.renderer_;\n\t}\n\n\t/**\n\t * Handles state batch changes. Calls any existing `sync` functions that\n\t * match the changed state keys.\n\t * @param {Event} event\n\t * @protected\n\t */\n\thandleStateChanged_(event) {\n\t\tthis.syncStateFromChanges_(event.changes);\n\t\tthis.emit('stateSynced', event);\n\t}\n\n\t/**\n\t * Handles the `newListener` event. Just flags that this event type has been\n\t * attached, so we can start proxying it when `DomEventEmitterProxy` is created.\n\t * @param {string} event\n\t * @protected\n\t */\n\thandleNewListener_(event) {\n\t\tthis.attachedListeners_[event] = true;\n\t}\n\n\t/**\n\t * Checks if the given function is a component constructor.\n\t * @param {!function()} fn Any function\n\t * @return {boolean}\n\t */\n\tstatic isComponentCtor(fn) {\n\t\treturn fn.prototype && fn.prototype[Component.COMPONENT_FLAG];\n\t}\n\n\t/**\n\t * Merges an array of values for the ELEMENT_CLASSES property into a single object.\n\t * @param {!Array.<string>} values The values to be merged.\n\t * @return {!string} The merged value.\n\t * @protected\n\t */\n\tmergeElementClasses_(values) {\n\t\tvar marked = {};\n\t\treturn values.filter(function(val) {\n\t\t\tif (!val || marked[val]) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tmarked[val] = true;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}).join(' ');\n\t}\n\n\t/**\n\t * Fired when the `element` state value is changed.\n\t * @param {!Object} event\n\t * @protected\n\t */\n\tonElementChanged_(event) {\n\t\tif (event.prevVal === event.newVal) {\n\t\t\t// The `elementChanged` event will be fired whenever the element is set,\n\t\t\t// even if its value hasn't actually changed, since that's how State\n\t\t\t// handles objects. We need to check manually here.\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setUpProxy_();\n\t\tthis.elementEventProxy_.setOriginEmitter(event.newVal);\n\t\tif (event.newVal) {\n\t\t\tthis.addElementClasses();\n\t\t\tthis.syncVisible(this.visible);\n\t\t}\n\t}\n\n\t/**\n\t * Fired when the `events` state value is changed.\n\t * @param {!Object} event\n\t * @protected\n\t */\n\tonEventsChanged_(event) {\n\t\tthis.eventsStateKeyHandler_.removeAllListeners();\n\t\tthis.addListenersFromObj_(event.newVal);\n\t}\n\n\t/**\n\t * Creates and renders a component for the given constructor function. This\n\t * will always make sure that the constructor runs without rendering the\n\t * component, having the `render` step happen only after it has finished.\n\t * @param {!function()} Ctor The component's constructor function.\n\t * @param {Object|Element=} opt_configOrElement Optional config data or parent\n\t *     for the component.\n\t * @param {Element=} opt_element Optional parent for the component.\n\t * @return {!Component} The rendered component's instance.\n\t */\n\tstatic render(Ctor, opt_configOrElement, opt_element) {\n\t\tvar config = opt_configOrElement;\n\t\tvar element = opt_element;\n\t\tif (core.isElement(opt_configOrElement)) {\n\t\t\tconfig = null;\n\t\t\telement = opt_configOrElement;\n\t\t}\n\t\tvar instance = new Ctor(config, false);\n\t\tinstance.render_(element);\n\t\treturn instance;\n\t}\n\n\t/**\n\t * Lifecycle. Renders the component into the DOM.\n\t *\n\t * Render Lifecycle:\n\t *   render event - The \"render\" event is emitted. Renderers act on this step.\n\t *   state synchronization - All synchronization methods are called.\n\t *   attach - Attach Lifecycle is called.\n\t *\n\t * @param {(string|Element|boolean)=} opt_parentElement Optional parent element\n\t *     to render the component. If set to `false`, the element won't be\n\t *     attached to any element after rendering. In this case, `attach` should\n\t *     be called manually later to actually attach it to the dom.\n\t * @param {boolean=} opt_skipRender Optional flag indicating that the actual\n\t *     rendering should be skipped. Only the other render lifecycle logic will\n\t *     be run, like syncing state and attaching the element. Should only\n\t *     be set if the component has already been rendered, like sub components.\n\t * @protected\n\t */\n\trender_(opt_parentElement, opt_skipRender) {\n\t\tif (!opt_skipRender) {\n\t\t\tthis.emit('render');\n\t\t}\n\t\tthis.setUpProxy_();\n\t\tthis.syncState_();\n\t\tthis.attach(opt_parentElement);\n\t\tthis.wasRendered = true;\n\t}\n\n\t/**\n\t * Renders this component as a subcomponent, meaning that no actual rendering is\n\t * needed since it was already rendered by the parent component. This just handles\n\t * other logics from the rendering lifecycle, like calling sync methods for the\n\t * state.\n\t */\n\trenderAsSubComponent() {\n\t\tthis.render_(null, true);\n\t}\n\n\t/**\n\t * Renders the component element into the DOM.\n\t * @param {(string|Element)=} opt_parentElement Optional parent element\n\t *     to render the component.\n\t * @param {(string|Element)=} opt_siblingElement Optional sibling element\n\t *     to render the component before it. Relevant when the component needs\n\t *     to be rendered before an existing element in the DOM, e.g.\n\t *     `component.attach(null, existingElement)`.\n\t * @protected\n\t */\n\trenderElement_(opt_parentElement, opt_siblingElement) {\n\t\tvar element = this.element;\n\t\tif (element && (opt_siblingElement || !element.parentNode)) {\n\t\t\tvar parent = dom.toElement(opt_parentElement) || this.DEFAULT_ELEMENT_PARENT;\n\t\t\tparent.insertBefore(element, dom.toElement(opt_siblingElement));\n\t\t}\n\t}\n\n\t/**\n\t * Setter logic for element state key.\n\t * @param {string|Element} newVal\n\t * @param {Element} currentVal\n\t * @return {Element}\n\t * @protected\n\t */\n\tsetterElementFn_(newVal, currentVal) {\n\t\tvar element = newVal;\n\t\tif (element) {\n\t\t\telement = dom.toElement(newVal) || currentVal;\n\t\t}\n\t\treturn element;\n\t}\n\n\t/**\n\t * Creates the `DomEventEmitterProxy` instance and has it start proxying any\n\t * listeners that have already been listened to.\n\t * @protected\n\t */\n\tsetUpProxy_() {\n\t\tif (this.elementEventProxy_) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar proxy = new DomEventEmitterProxy(this.element, this);\n\t\tthis.elementEventProxy_ = proxy;\n\n\t\tobject.map(this.attachedListeners_, proxy.proxyEvent.bind(proxy));\n\t\tthis.attachedListeners_ = null;\n\n\t\tthis.newListenerHandle_.removeListener();\n\t\tthis.newListenerHandle_ = null;\n\t}\n\n\t/**\n\t * Fires state synchronization functions.\n\t * @protected\n\t */\n\tsyncState_() {\n\t\tvar keys = this.getStateKeys();\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tthis.fireStateKeyChange_(keys[i]);\n\t\t}\n\t}\n\n\t/**\n\t * Fires synchronization changes for state keys.\n\t * @param {Object.<string, Object>} changes Object containing the state key\n\t *     name as key and an object with newVal and prevVal as value.\n\t * @protected\n\t */\n\tsyncStateFromChanges_(changes) {\n\t\tfor (var key in changes) {\n\t\t\tthis.fireStateKeyChange_(key, changes[key]);\n\t\t}\n\t}\n\n\t/**\n\t * State synchronization logic for the `elementClasses` state key.\n\t * @param {string} newVal\n\t * @param {string} prevVal\n\t */\n\tsyncElementClasses(newVal, prevVal) {\n\t\tif (this.element && prevVal) {\n\t\t\tdom.removeClasses(this.element, prevVal);\n\t\t}\n\t\tthis.addElementClasses();\n\t}\n\n\t/**\n\t * State synchronization logic for `visible` state key.\n\t * Updates the element's display value according to its visibility.\n\t * @param {boolean} newVal\n\t */\n\tsyncVisible(newVal) {\n\t\tif (this.element) {\n\t\t\tthis.element.style.display = newVal ? '' : 'none';\n\t\t}\n\t}\n\n\t/**\n\t * Lifecycle. Called whenever the component has just been rendered.\n\t * @param {boolean} firstRender Flag indicating if this was the component's\n\t *     first render.\n\t */\n\trendered() {}\n\n\t/**\n\t * Validator logic for elementClasses state key.\n\t * @param {string} val\n\t * @return {boolean} True if val is a valid element classes.\n\t * @protected\n\t */\n\tvalidatorElementClassesFn_(val) {\n\t\treturn core.isString(val);\n\t}\n\n\t/**\n\t * Validator logic for element state key.\n\t * @param {?string|Element} val\n\t * @return {boolean} True if val is a valid element.\n\t * @protected\n\t */\n\tvalidatorElementFn_(val) {\n\t\treturn core.isElement(val) || core.isString(val) || !core.isDefAndNotNull(val);\n\t}\n\n\t/**\n\t * Validator logic for the `events` state key.\n\t * @param {Object} val\n\t * @return {boolean}\n\t * @protected\n\t */\n\tvalidatorEventsFn_(val) {\n\t\treturn !core.isDefAndNotNull(val) || core.isObject(val);\n\t}\n}\n\n/**\n * Component state definition.\n * @type {Object}\n * @static\n */\nComponent.STATE = {\n\t/**\n\t * Component element bounding box.\n\t * @type {Element}\n\t * @writeOnce\n\t */\n\telement: {\n\t\tsetter: 'setterElementFn_',\n\t\tvalidator: 'validatorElementFn_'\n\t},\n\n\t/**\n\t * CSS classes to be applied to the element.\n\t * @type {string}\n\t */\n\telementClasses: {\n\t\tvalidator: 'validatorElementClassesFn_'\n\t},\n\n\t/**\n\t * Listeners that should be attached to this component. Should be provided as an object,\n\t * where the keys are event names and the values are the listener functions (or function\n\t * names).\n\t * @type {Object<string, (function()|string|{selector: string, fn: function()|string})>}\n\t */\n\tevents: {\n\t\tvalidator: 'validatorEventsFn_',\n\t\tvalue: null\n\t},\n\n\t/**\n\t * Indicates if the component is visible or not.\n\t * @type {boolean}\n\t */\n\tvisible: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: true\n\t}\n};\n\nComponent.COMPONENT_FLAG = '__metal_component__';\n\n/**\n * CSS classes to be applied to the element.\n * @type {string}\n * @protected\n * @static\n */\nComponent.ELEMENT_CLASSES = '';\n\n/**\n * The `ComponentRenderer` that should be used. Components need to set this\n * to a subclass of `ComponentRenderer` that has the rendering logic, like\n * `SoyRenderer`.\n * @type {!ComponentRenderer}\n * @static\n */\nComponent.RENDERER = ComponentRenderer;\n\n/**\n * Flag indicating if component updates will happen synchronously. Updates are\n * done asynchronously by default, which allows changes to be batched and\n * applied together.\n * @type {boolean}\n */\nComponent.SYNC_UPDATES = false;\n\n/**\n * A list with state key names that will automatically be rejected as invalid.\n * @type {!Array<string>}\n */\nComponent.INVALID_KEYS = ['components', 'wasRendered'];\n\n/**\n * Sets a prototype flag to easily determine if a given constructor is for\n * a component or not.\n */\nComponent.prototype[Component.COMPONENT_FLAG] = true;\n\nexport default Component;\n"],"sourceRoot":"/source/"}