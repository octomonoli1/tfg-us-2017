{"version":3,"sources":["IncrementalDomUnusedComponents.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;AAEA,KAAI,SAAS,EAAT;;KAEE;;;;;iCAKE,yCAAgB;AACtB,QAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,OAAO,MAAP,EAAe,GAAnC,EAAwC;AACvC,QAAI,CAAC,OAAO,CAAP,EAAU,UAAV,EAAD,EAAyB;AAC5B,SAAI,WAAW,OAAO,CAAP,EAAU,WAAV,EAAX,CADwB;AAE5B,SAAI,CAAC,SAAS,SAAT,EAAD,EAAuB;;;AAG1B,aAAO,CAAP,EAAU,OAAV,GAAoB,IAApB,CAH0B;;AAK1B,UAAI,MAAM,OAAO,CAAP,EAAU,MAAV,CAAiB,GAAjB,CALgB;AAM1B,UAAI,QAAQ,SAAS,QAAT,EAAR,CANsB;AAO1B,UAAI,MAAM,UAAN,CAAiB,GAAjB,MAA0B,OAAO,CAAP,CAA1B,EAAqC;AACxC,aAAM,oBAAN,CAA2B,CAAC,GAAD,CAA3B,EADwC;OAAzC,MAEO;AACN,cAAO,CAAP,EAAU,OAAV,GADM;OAFP;MAPD;KAFD;IADD;AAkBA,YAAS,EAAT,CAnBsB;;;AALlB,iCAgCE,6BAAS,OAAO;AACtB,QAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAM,MAAN,EAAc,GAAlC,EAAuC;AACtC,UAAM,CAAN,EAAS,WAAT,GAAuB,OAAvB,GAAiC,IAAjC,CADsC;AAEtC,WAAO,IAAP,CAAY,MAAM,CAAN,CAAZ,EAFsC;IAAvC;;;SAjCI;;;mBAwCS","file":"../../../node_modules/metal-incremental-dom/src/cleanup/IncrementalDomUnusedComponents.js","sourcesContent":["'use strict';\n\nvar comps_ = [];\n\nclass IncrementalDomUnusedComponents {\n\t/**\n\t * Disposes all sub components that were not rerendered since the last\n\t * time this function was scheduled.\n\t */\n\tstatic disposeUnused() {\n\t\tfor (var i = 0; i < comps_.length; i++) {\n\t\t\tif (!comps_[i].isDisposed()) {\n\t\t\t\tvar renderer = comps_[i].getRenderer();\n\t\t\t\tif (!renderer.getParent()) {\n\t\t\t\t\t// Don't let disposing cause the element to be removed, since it may\n\t\t\t\t\t// be currently being reused by another component.\n\t\t\t\t\tcomps_[i].element = null;\n\n\t\t\t\t\tvar ref = comps_[i].config.ref;\n\t\t\t\t\tvar owner = renderer.getOwner();\n\t\t\t\t\tif (owner.components[ref] === comps_[i]) {\n\t\t\t\t\t\towner.disposeSubComponents([ref]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcomps_[i].dispose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcomps_ = [];\n\t}\n\n\t/**\n\t * Schedules the given components to be checked and disposed if not used\n\t * anymore, when `IncrementalDomUnusedComponents.disposeUnused` is called.\n\t * @param {!Array<!Component} comps\n\t */\n\tstatic schedule(comps) {\n\t\tfor (var i = 0; i < comps.length; i++) {\n\t\t\tcomps[i].getRenderer().parent_ = null;\n\t\t\tcomps_.push(comps[i]);\n\t\t}\n\t}\n}\n\nexport default IncrementalDomUnusedComponents;\n"],"sourceRoot":"/source/"}